(function(){var El=Ext.Element,ElFrame,ELD=Ext.lib.Dom,A=Ext.lib.Anim,Evm=Ext.EventManager,E=Ext.lib.Event,DOC=document,emptyFn=function(){},OP=Object.prototype,OPString=OP.toString,HTMLDoc='[object HTMLDocument]';if(!Ext.elCache||parseInt(Ext.version.replace(/\./g,''),10)<311){alert('Ext Release '+Ext.version+' is not supported');}Ext._documents={};Ext._documents[Ext.id(document,'_doc')]=Ext.elCache;var resolveCache=ELD.resolveDocumentCache=function(el,cacheId){var doc=GETDOC(el),c=Ext.isDocument(doc)?Ext.id(doc):cacheId,cache=Ext._documents[c]||null,d,win;if(!cache&&doc&&(win=doc.parentWindow||doc.defaultView)){if(d=win.frameElement){c=d.id||d.name;}}return cache||Ext._documents[c]||(c?Ext._documents[c]={}:null);},clearCache=ELD.clearDocumentCache=function(cacheId){delete Ext._documents[cacheId];};El.addMethods||(El.addMethods=function(ov){Ext.apply(El.prototype,ov||{});});Ext.removeNode=function(n){var dom=n?n.dom||n:null;if(dom&&dom.tagName!='BODY'){var el,elc,elCache=resolveCache(dom),parent;if((elc=elCache[dom.id])&&(el=elc.el)){if(el.dom){Ext.enableNestedListenerRemoval?Evm.purgeElement(el.dom,true):Evm.removeAll(el.dom);}delete elCache[dom.id];delete el.dom;delete el._context;el=null;}(parent=dom.parentElement||dom.parentNode)&&parent.removeChild(dom);dom=null;}};var overload=function(pfn,fn){var f=typeof pfn==='function'?pfn:function t(){};var ov=f._ovl;if(!ov){ov={base:f};ov[f.length||0]=f;f=function t(){var o=arguments.callee._ovl;var fn=o[arguments.length]||o.base;return fn&&fn!=arguments.callee?fn.apply(this,arguments):undefined;};}var fnA=[].concat(fn);for(var i=0,l=fnA.length;i<l;++i){ov[fnA[i].length]=fnA[i];}f._ovl=ov;var t=null;return f;};Ext.applyIf(Ext,{overload:overload(overload,[function(fn){return overload(null,fn);},function(obj,mname,fn){return obj[mname]=overload(obj[mname],fn);}]),isArray:function(v){return!!v&&OPString.apply(v)=='[object Array]';},isObject:function(obj){return!!obj&&typeof obj=='object';},isDocument:function(el,testOrigin){var elm=el?el.dom||el:null;var test=elm&&((OPString.apply(elm)==HTMLDoc)||(elm&&elm.nodeType==9));if(test&&testOrigin){try{test=!!elm.location;}catch(e){return false;}}return test;},isWindow:function(el){var elm=el?el.dom||el:null;return elm?!!elm.navigator||OPString.apply(elm)=="[object Window]":false;},isIterable:function(v){if(Ext.isArray(v)||v.callee){return true;}if(/NodeList|HTMLCollection/.test(OPString.call(v))){return true;}return((typeof v.nextNode!='undefined'||v.item)&&Ext.isNumber(v.length));},isElement:function(obj){return obj&&Ext.type(obj)=='element';},isEvent:function(obj){return OPString.apply(obj)=='[object Event]'||(Ext.isObject(obj)&&!Ext.type(o.constructor)&&(window.event&&obj.clientX&&obj.clientX==window.event.clientX));},isFunction:function(obj){return!!obj&&typeof obj=='function';},isEventSupported:function(evName,testEl){var TAGNAMES={'select':'input','change':'input','submit':'form','reset':'form','load':'img','error':'img','abort':'img'},cache={},onPrefix=/^on/i,getKey=function(type,el){var tEl=Ext.getDom(el);return(tEl?(Ext.isElement(tEl)||Ext.isDocument(tEl)?tEl.nodeName.toLowerCase():el.self?'#window':el||'#object'):el||'div')+':'+type;};return function(evName,testEl){evName=(evName||'').replace(onPrefix,'');var el,isSupported=false;var eventName='on'+evName;var tag=(testEl?testEl:TAGNAMES[evName])||'div';var key=getKey(evName,tag);if(key in cache){return cache[key];}el=Ext.isString(tag)?DOC.createElement(tag):testEl;isSupported=(!!el&&(eventName in el));isSupported||(isSupported=window.Event&&!!(String(evName).toUpperCase()in window.Event));if(!isSupported&&el){el.setAttribute&&el.setAttribute(eventName,'return;');isSupported=Ext.isFunction(el[eventName]);}cache[key]=isSupported;el=null;return isSupported;};}()});var assertClass=function(el){return El;return El[(el.tagName||'-').toUpperCase()]||El;};var libFlyweight;function fly(el,doc){if(!libFlyweight){libFlyweight=new Ext.Element.Flyweight();}libFlyweight.dom=Ext.getDom(el,null,doc);return libFlyweight;}Ext.apply(Ext,{get:El.get=function(el,doc){if(!el){return null;}var isDoc=Ext.isDocument(el);Ext.isDocument(doc)||(doc=DOC);var ex,elm,id,cache=resolveCache(doc);if(typeof el=="string"){elm=Ext.getDom(el,null,doc);if(!elm)return null;if(cache[el]&&cache[el].el){ex=cache[el].el;ex.dom=elm;}else{ex=El.addToCache(new(assertClass(elm))(elm,null,doc));}return ex;}else if(isDoc){if(!Ext.isDocument(el,true)){return false;}cache=resolveCache(el);if(cache[Ext.id(el)]&&cache[el.id].el){return cache[el.id].el;}var f=function(){};f.prototype=El.prototype;var docEl=new f();docEl.dom=el;docEl.id=Ext.id(el,'_doc');docEl._isDoc=true;El.addToCache(docEl,null,cache);cache[docEl.id].skipGC=true;return docEl;}else if(el instanceof El){if(el.dom){el.id=Ext.id(el.dom);}else{el.dom=el.id?Ext.getDom(el.id,true):null;}if(el.dom){cache=resolveCache(el);(cache[el.id]||(cache[el.id]={data:{},events:{}})).el=el;}return el;}else if(el.tagName||Ext.isWindow(el)){cache=resolveCache(el);id=Ext.id(el);if(cache[id]&&(ex=cache[id].el)){ex.dom=el;}else{ex=El.addToCache(new(assertClass(el))(el,null,doc),null,cache);el.navigator&&(cache[id].skipGC=true);}return ex;}else if(el.isComposite){return el;}else if(Ext.isArray(el)){return Ext.get(doc,doc).select(el);}return null;},getDom:function(el,strict,doc){var D=doc||DOC;if(!el||!D){return null;}if(el.dom){return el.dom;}else{if(Ext.isString(el)){var e=D.getElementById(el);if(e&&Ext.isIE&&strict){if(el==e.getAttribute('id')){return e;}else{return null;}}return e;}else{return el;}}},getBody:function(doc){var D=ELD.getDocument(doc)||DOC;return Ext.get(D.body||D.documentElement);},getDoc:Ext.overload([Ext.getDoc,function(doc){return Ext.get(doc,doc);}])});El.data=function(el,key,value){el=El.get(el);if(!el){return null;}var c=resolveCache(el)[el.id].data;if(arguments.length==2){return c[key];}else{return(c[key]=value);}};El.addToCache=function(el,id,cache){id=id||el.id;var C=cache||resolveCache(el);C[id]={el:el,data:{},events:{}};return el;};El.NOSIZE=3;var propCache={},camelRe=/(-[a-z])/gi,camelFn=function(m,a){return a.charAt(1).toUpperCase();},opacityRe=/alpha\(opacity=(.*)\)/i,trimRe=/^\s+|\s+$/g,marginRightRe=/marginRight/,propFloat=Ext.isIE?'styleFloat':'cssFloat',view=DOC.defaultView,VISMODE='visibilityMode',ELDISPLAY=El.DISPLAY,ELVISIBILITY=El.VISIBILITY,ELNOSIZE=El.NOSIZE,ORIGINALDISPLAY='originalDisplay',PADDING="padding",MARGIN="margin",BORDER="border",LEFT="-left",RIGHT="-right",TOP="-top",BOTTOM="-bottom",WIDTH="-width",MATH=Math,OPACITY="opacity",VISIBILITY="visibility",DISPLAY="display",OFFSETS="offsets",NOSIZE="nosize",HIDDEN="hidden",NONE="none",ISVISIBLE='isVisible',ISCLIPPED='isClipped',OVERFLOW='overflow',OVERFLOWX='overflow-x',OVERFLOWY='overflow-y',ORIGINALCLIP='originalClip',XMASKED="x-masked",XMASKEDRELATIVE="x-masked-relative",borders={l:BORDER+LEFT+WIDTH,r:BORDER+RIGHT+WIDTH,t:BORDER+TOP+WIDTH,b:BORDER+BOTTOM+WIDTH},paddings={l:PADDING+LEFT,r:PADDING+RIGHT,t:PADDING+TOP,b:PADDING+BOTTOM},margins={l:MARGIN+LEFT,r:MARGIN+RIGHT,t:MARGIN+TOP,b:MARGIN+BOTTOM},data=El.data,GETDOM=Ext.getDom,GET=Ext.get,DH=Ext.DomHelper,propRe=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,CSS=Ext.util.CSS,getDisplay=function(dom){var d=data(dom,ORIGINALDISPLAY);if(d===undefined){data(dom,ORIGINALDISPLAY,d='');}return d;},getVisMode=function(dom){var m=data(dom,VISMODE);if(m===undefined){data(dom,VISMODE,m=1)}return m;};function chkCache(prop){return propCache[prop]||(propCache[prop]=prop=='float'?propFloat:prop.replace(camelRe,camelFn));};El.addMethods({getDocument:function(){return this._context||(this._context=GETDOC(this));},remove:function(cleanse,deep){var dom=this.dom;this.isMasked()&&this.unmask();if(dom){Ext.removeNode(dom);delete this._context;delete this.dom;}},appendChild:function(el,doc){return GET(el,doc||this.getDocument()).appendTo(this);},appendTo:function(el,doc){GETDOM(el,false,doc||this.getDocument()).appendChild(this.dom);return this;},insertBefore:function(el,doc){(el=GETDOM(el,false,doc||this.getDocument())).parentNode.insertBefore(this.dom,el);return this;},insertAfter:function(el,doc){(el=GETDOM(el,false,doc||this.getDocument())).parentNode.insertBefore(this.dom,el.nextSibling);return this;},insertFirst:function(el,returnDom){el=el||{};if(el.nodeType||el.dom||typeof el=='string'){el=GETDOM(el);this.dom.insertBefore(el,this.dom.firstChild);return!returnDom?GET(el):el;}else{return this.createChild(el,this.dom.firstChild,returnDom);}},replace:function(el,doc){el=GET(el,doc||this.getDocument());this.insertBefore(el);el.remove();return this;},replaceWith:function(el,doc){var me=this;if(el.nodeType||el.dom||typeof el=='string'){el=GETDOM(el,false,doc||me.getDocument());me.dom.parentNode.insertBefore(el,me.dom);}else{el=DH.insertBefore(me.dom,el);}var C=resolveCache(me);Ext.removeNode(me.dom);me.id=Ext.id(me.dom=el);El.addToCache(me.isFlyweight?new(assertClass(me.dom))(me.dom,null,C):me);return me;},insertHtml:function(where,html,returnEl){var el=DH.insertHtml(where,this.dom,html);return returnEl?Ext.get(el,GETDOC(el)):el;},setVisibilityMode:function(visMode){data(this.dom,VISMODE,visMode);return this;},isVisible:function(){return this.visible||Ext.value(data(this.dom,ISVISIBLE),!this.isStyle(VISIBILITY,HIDDEN)&&!this.isStyle(DISPLAY,NONE));},setVisible:function(visible,animate){var me=this,dom=me.dom,isDisplay,isVisibility,isOffsets,isNosize;if(typeof animate=='string'){isDisplay=animate==DISPLAY;isVisibility=animate==VISIBILITY;isOffsets=animate==OFFSETS;isNosize=animate==NOSIZE;animate=false;}else{var visMode=getVisMode(dom);isDisplay=visMode==ELDISPLAY;isVisibility=visMode==ELVISIBILITY;isNosize=visMode==ELNOSIZE;}if(!animate||!me.anim){if(isNosize){if(!visible){me.hideModeStyles={width:me.getWidth(),height:me.getHeight()};me.applyStyles({width:'0px',height:'0px'});}else{me.applyStyles(me.hideModeStyles||{width:'auto',height:'auto'});}}else if(isDisplay){me.setDisplayed(visible);}else if(isOffsets){if(!visible){me.hideModeStyles={position:me.getStyle('position'),top:me.getStyle('top'),left:me.getStyle('left')};me.applyStyles({position:'absolute',top:'-10000px',left:'-10000px'});}else{me.applyStyles(me.hideModeStyles||{position:'',top:'',left:''});}}else{me.fixDisplay();dom.style.visibility=visible?"visible":HIDDEN;}}else{if(visible){me.setOpacity(.01);me.setVisible(true);}me.anim({opacity:{to:(visible?1:0)}},me.preanim(arguments,1),null,.35,'easeIn',function(){if(!visible){dom.style[isDisplay?DISPLAY:VISIBILITY]=(isDisplay)?NONE:HIDDEN;Ext.fly(dom).setOpacity(1);}});}data(dom,ISVISIBLE,visible);return me;},setDisplayed:function(value){if(typeof value=="boolean"){data(this.dom,ISVISIBLE,value);value=value?getDisplay(this.dom):NONE;}this.setStyle(DISPLAY,value);return this;},fixDisplay:function(){var me=this;if(me.isStyle(DISPLAY,NONE)){me.setStyle(VISIBILITY,HIDDEN);me.setStyle(DISPLAY,getDisplay(me.dom));if(me.isStyle(DISPLAY,NONE)){me.setStyle(DISPLAY,"block");}}},enableDisplayMode:function(display){this.setVisibilityMode(El.DISPLAY);if(!Ext.isEmpty(display)){data(this.dom,ORIGINALDISPLAY,display);}return this;},scrollIntoView:function(container,hscroll){var d=this.getDocument();var c=Ext.getDom(container,null,d)||Ext.getBody(d).dom;var el=this.dom;var o=this.getOffsetsTo(c),s=this.getScroll(),l=o[0]+s.left,t=o[1]+s.top,b=t+el.offsetHeight,r=l+el.offsetWidth;var ch=c.clientHeight;var ct=parseInt(c.scrollTop,10);var cl=parseInt(c.scrollLeft,10);var cb=ct+ch;var cr=cl+c.clientWidth;if(el.offsetHeight>ch||t<ct){c.scrollTop=t;}else if(b>cb){c.scrollTop=b-ch;}c.scrollTop=c.scrollTop;if(hscroll!==false){if(el.offsetWidth>c.clientWidth||l<cl){c.scrollLeft=l;}else if(r>cr){c.scrollLeft=r-c.clientWidth;}c.scrollLeft=c.scrollLeft;}return this;},contains:function(el){try{return!el?false:ELD.isAncestor(this.dom,el.dom?el.dom:el);}catch(e){return false;}},getScroll:function(){var d=this.dom,doc=this.getDocument(),body=doc.body,docElement=doc.documentElement,l,t,ret;if(Ext.isDocument(d)||d==body){if(Ext.isIE&&ELD.docIsStrict(doc)){l=docElement.scrollLeft;t=docElement.scrollTop;}else{l=window.pageXOffset;t=window.pageYOffset;}ret={left:l||(body?body.scrollLeft:0),top:t||(body?body.scrollTop:0)};}else{ret={left:d.scrollLeft,top:d.scrollTop};}return ret;},getStyle:function(){var getStyle=view&&view.getComputedStyle?function GS(prop){var el=!this._isDoc?this.dom:null,v,cs,out,display,wk=Ext.isWebKit,display;if(!el||!el.style)return null;prop=chkCache(prop);out=(v=el.style[prop])?v:(cs=view.getComputedStyle(el,''))?cs[prop]:null;if(wk&&marginRightRe.test(prop)&&out!='0px'){display=this.getStyle('display');el.style.display='inline-block';out=view.getComputedStyle(el,'');el.style.display=display;}if(wk&&out=='rgba(0, 0, 0, 0)'){out='transparent';}return out;}:function GS(prop){var el=!this._isDoc?this.dom:null,m,cs;if(!el||!el.style)return null;if(prop==OPACITY){if(el.style.filter.match){if(m=el.style.filter.match(opacityRe)){var fv=parseFloat(m[1]);if(!isNaN(fv)){return fv?fv/100:0;}}}return 1;}prop=chkCache(prop);return el.style[prop]||((cs=el.currentStyle)?cs[prop]:null);};var GS=null;return getStyle;}(),setStyle:function(prop,value){if(this._isDoc||Ext.isDocument(this.dom))return this;var tmp,style,camel;if(!Ext.isObject(prop)){tmp={};tmp[prop]=value;prop=tmp;}for(style in prop){value=prop[style];style==OPACITY?this.setOpacity(value):this.dom.style[chkCache(style)]=value;}return this;},center:function(centerIn){return this.alignTo(centerIn||this.getDocument(),'c-c');},mask:function(msg,msgCls){var me=this,dom=me.dom,dh=Ext.DomHelper,EXTELMASKMSG="ext-el-mask-msg",el,mask;if(me.getStyle("position")=="static"){me.addClass(XMASKEDRELATIVE);}if((el=data(dom,'maskMsg'))){el.remove();}if((el=data(dom,'mask'))){el.remove();}mask=dh.append(dom,{cls:"ext-el-mask"},true);data(dom,'mask',mask);me.addClass(XMASKED);mask.setDisplayed(true);if(typeof msg=='string'){var mm=dh.append(dom,{cls:EXTELMASKMSG,cn:{tag:'div'}},true);data(dom,'maskMsg',mm);mm.dom.className=msgCls?EXTELMASKMSG+" "+msgCls:EXTELMASKMSG;mm.dom.firstChild.innerHTML=msg;mm.setDisplayed(true);mm.center(me);}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&me.getStyle('height')=='auto'){mask.setSize(undefined,me.getHeight());}return mask;},unmask:function(){var me=this,dom=me.dom,mask=data(dom,'mask'),maskMsg=data(dom,'maskMsg');if(mask){if(maskMsg){maskMsg.remove();data(dom,'maskMsg',undefined);}mask.remove();data(dom,'mask',undefined);}me.removeClass([XMASKED,XMASKEDRELATIVE]);},isMasked:function(){var m=data(this.dom,'mask');return m&&m.isVisible();},getCenterXY:function(){return this.getAlignToXY(this.getDocument(),'c-c');},getAnchorXY:function(anchor,local,s){anchor=(anchor||"tl").toLowerCase();s=s||{};var me=this,doc=this.getDocument(),vp=me.dom==doc.body||me.dom==doc,w=s.width||vp?ELD.getViewWidth(false,doc):me.getWidth(),h=s.height||vp?ELD.getViewHeight(false,doc):me.getHeight(),xy,r=Math.round,o=me.getXY(),scroll=me.getScroll(),extraX=vp?scroll.left:!local?o[0]:0,extraY=vp?scroll.top:!local?o[1]:0,hash={c:[r(w*.5),r(h*.5)],t:[r(w*.5),0],l:[0,r(h*.5)],r:[w,r(h*.5)],b:[r(w*.5),h],tl:[0,0],bl:[0,h],br:[w,h],tr:[w,0]};xy=hash[anchor];return[xy[0]+extraX,xy[1]+extraY];},anchorTo:function(el,alignment,offsets,animate,monitorScroll,callback){var me=this,dom=me.dom;function action(){fly(dom).alignTo(el,alignment,offsets,animate);Ext.callback(callback,fly(dom));};Ext.EventManager.onWindowResize(action,me);if(!Ext.isEmpty(monitorScroll)){Ext.EventManager.on(window,'scroll',action,me,{buffer:!isNaN(monitorScroll)?monitorScroll:50});}action.call(me);return me;},getScroll:function(){var d=this.dom,doc=this.getDocument(),body=doc.body,docElement=doc.documentElement,l,t,ret;if(d==doc||d==body){if(Ext.isIE&&ELD.docIsStrict(doc)){l=docElement.scrollLeft;t=docElement.scrollTop;}else{l=window.pageXOffset;t=window.pageYOffset;}ret={left:l||(body?body.scrollLeft:0),top:t||(body?body.scrollTop:0)};}else{ret={left:d.scrollLeft,top:d.scrollTop};}return ret;},getAlignToXY:function(el,p,o){var doc;el=Ext.get(el,doc=this.getDocument());if(!el||!el.dom){throw"Element.getAlignToXY with an element that doesn't exist";}o=o||[0,0];p=(p=="?"?"tl-bl?":(!/-/.test(p)&&p!=""?"tl-"+p:p||"tl-bl")).toLowerCase();var me=this,d=me.dom,a1,a2,x,y,w,h,r,dw=ELD.getViewWidth(false,doc)-10,dh=ELD.getViewHeight(false,doc)-10,p1y,p1x,p2y,p2x,swapY,swapX,docElement=doc.documentElement,docBody=doc.body,scrollX=(docElement.scrollLeft||docBody.scrollLeft||0)+5,scrollY=(docElement.scrollTop||docBody.scrollTop||0)+5,c=false,p1="",p2="",m=p.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!m){throw"Element.getAlignToXY with an invalid alignment "+p;}p1=m[1];p2=m[2];c=!!m[3];a1=me.getAnchorXY(p1,true);a2=el.getAnchorXY(p2,false);x=a2[0]-a1[0]+o[0];y=a2[1]-a1[1]+o[1];if(c){w=me.getWidth();h=me.getHeight();r=el.getRegion();p1y=p1.charAt(0);p1x=p1.charAt(p1.length-1);p2y=p2.charAt(0);p2x=p2.charAt(p2.length-1);swapY=((p1y=="t"&&p2y=="b")||(p1y=="b"&&p2y=="t"));swapX=((p1x=="r"&&p2x=="l")||(p1x=="l"&&p2x=="r"));if(x+w>dw+scrollX){x=swapX?r.left-w:dw+scrollX-w;}if(x<scrollX){x=swapX?r.right:scrollX;}if(y+h>dh+scrollY){y=swapY?r.top-h:dh+scrollY-h;}if(y<scrollY){y=swapY?r.bottom:scrollY;}}return[x,y];},adjustForConstraints:function(xy,parent,offsets){return this.getConstrainToXY(parent||this.getDocument(),false,offsets,xy)||xy;},getConstrainToXY:function(el,local,offsets,proposedXY){var os={top:0,left:0,bottom:0,right:0};return function(el,local,offsets,proposedXY){var doc=this.getDocument();el=Ext.get(el,doc);offsets=offsets?Ext.applyIf(offsets,os):os;var vw,vh,vx=0,vy=0;if(el.dom==doc.body||el.dom==doc){vw=ELD.getViewWidth(false,doc);vh=ELD.getViewHeight(false,doc);}else{vw=el.dom.clientWidth;vh=el.dom.clientHeight;if(!local){var vxy=el.getXY();vx=vxy[0];vy=vxy[1];}}var s=el.getScroll();vx+=offsets.left+s.left;vy+=offsets.top+s.top;vw-=offsets.right;vh-=offsets.bottom;var vr=vx+vw;var vb=vy+vh;var xy=proposedXY||(!local?this.getXY():[this.getLeft(true),this.getTop(true)]);var x=xy[0],y=xy[1];var w=this.dom.offsetWidth,h=this.dom.offsetHeight;var moved=false;if((x+w)>vr){x=vr-w;moved=true;}if((y+h)>vb){y=vb-h;moved=true;}if(x<vx){x=vx;moved=true;}if(y<vy){y=vy;moved=true;}return moved?[x,y]:false;};}(),getCenterXY:function(){return this.getAlignToXY(Ext.getBody(this.getDocument()),'c-c');},center:function(centerIn){return this.alignTo(centerIn||Ext.getBody(this.getDocument()),'c-c');},findParent:function(simpleSelector,maxDepth,returnEl){var p=this.dom,D=this.getDocument(),b=D.body,depth=0,stopEl;if(Ext.isGecko&&OPString.call(p)=='[object XULElement]'){return null;}maxDepth=maxDepth||50;if(isNaN(maxDepth)){stopEl=Ext.getDom(maxDepth,null,D);maxDepth=Number.MAX_VALUE;}while(p&&p.nodeType==1&&depth<maxDepth&&p!=b&&p!=stopEl){if(Ext.DomQuery.is(p,simpleSelector)){return returnEl?Ext.get(p,D):p;}depth++;p=p.parentNode;}return null;},clip:function(){var me=this,dom=me.dom;if(!data(dom,ISCLIPPED)){data(dom,ISCLIPPED,true);data(dom,ORIGINALCLIP,{o:me.getStyle(OVERFLOW),x:me.getStyle(OVERFLOWX),y:me.getStyle(OVERFLOWY)});me.setStyle(OVERFLOW,HIDDEN);me.setStyle(OVERFLOWX,HIDDEN);me.setStyle(OVERFLOWY,HIDDEN);}return me;},unclip:function(){var me=this,dom=me.dom;if(data(dom,ISCLIPPED)){data(dom,ISCLIPPED,false);var o=data(dom,ORIGINALCLIP);if(o.o){me.setStyle(OVERFLOW,o.o);}if(o.x){me.setStyle(OVERFLOWX,o.x);}if(o.y){me.setStyle(OVERFLOWY,o.y);}}return me;},getViewSize:function(){var doc=this.getDocument(),d=this.dom,isDoc=(d==doc||d==doc.body);if(isDoc){var extdom=Ext.lib.Dom;return{width:extdom.getViewWidth(),height:extdom.getViewHeight()}}else{return{width:d.clientWidth,height:d.clientHeight}}},getStyleSize:function(){var me=this,w,h,doc=this.getDocument(),d=this.dom,isDoc=(d==doc||d==doc.body),s=d.style;if(isDoc){var extdom=Ext.lib.Dom;return{width:extdom.getViewWidth(),height:extdom.getViewHeight()}}if(s.width&&s.width!='auto'){w=parseFloat(s.width);if(me.isBorderBox()){w-=me.getFrameWidth('lr');}}if(s.height&&s.height!='auto'){h=parseFloat(s.height);if(me.isBorderBox()){h-=me.getFrameWidth('tb');}}return{width:w||me.getWidth(true),height:h||me.getHeight(true)};}});Ext.isDefined(El.collectorThreadId)&&clearInterval(El.collectorThreadId);function garbageCollect(){if(!Ext.enableGarbageCollector){clearInterval(El.collectorThreadId);}else{var eid,el,d,o,EC=Ext.elCache;for(eid in EC){o=EC[eid];if(o.skipGC){continue;}el=o.el;d=el.dom;if(!d||!d.parentNode||(!d.offsetParent&&!DOC.getElementById(eid))){if(Ext.enableListenerCollection){Ext.EventManager.removeAll(d);}delete EC[eid];}}if(Ext.isIE){var t={};for(eid in EC){t[eid]=EC[eid];}Ext.elCache=Ext._documents[Ext.id(document)]=t;t=null;}}}if(Ext.enableGarbageCollector){El.collectorThreadId=setInterval(garbageCollect,30000);}Ext.apply(ELD,{getDocument:function(el,accessTest){var dom=null;try{dom=Ext.getDom(el,null,null);}catch(ex){}var isDoc=Ext.isDocument(dom);if(isDoc){if(accessTest){return Ext.isDocument(dom,accessTest)?dom:null;}return dom;}return dom?dom.ownerDocument||dom.document:null;},docIsStrict:function(doc){return(Ext.isDocument(doc)?doc:this.getDocument(doc)).compatMode=="CSS1Compat";},getViewWidth:Ext.overload([ELD.getViewWidth||function(full){},function(){return this.getViewWidth(false);},function(full,doc){return full?this.getDocumentWidth(doc):this.getViewportWidth(doc);}]),getViewHeight:Ext.overload([ELD.getViewHeight||function(full){},function(){return this.getViewHeight(false);},function(full,doc){return full?this.getDocumentHeight(doc):this.getViewportHeight(doc);}]),getDocumentHeight:Ext.overload([ELD.getDocumentHeight||emptyFn,function(doc){if(doc=this.getDocument(doc)){return Math.max(!this.docIsStrict(doc)?doc.body.scrollHeight:doc.documentElement.scrollHeight,this.getViewportHeight(doc));}return undefined;}]),getDocumentWidth:Ext.overload([ELD.getDocumentWidth||emptyFn,function(doc){if(doc=this.getDocument(doc)){return Math.max(!this.docIsStrict(doc)?doc.body.scrollWidth:doc.documentElement.scrollWidth,this.getViewportWidth(doc));}return undefined;}]),getViewportHeight:Ext.overload([ELD.getViewportHeight||emptyFn,function(doc){if(doc=this.getDocument(doc)){if(Ext.isIE){return this.docIsStrict(doc)?doc.documentElement.clientHeight:doc.body.clientHeight;}else{return doc.defaultView.innerHeight;}}return undefined;}]),getViewportWidth:Ext.overload([ELD.getViewportWidth||emptyFn,function(doc){if(doc=this.getDocument(doc)){return!this.docIsStrict(doc)&&!Ext.isOpera?doc.body.clientWidth:Ext.isIE?doc.documentElement.clientWidth:doc.defaultView.innerWidth;}return undefined;}]),getXY:Ext.overload([ELD.getXY||emptyFn,function(el,doc){el=Ext.getDom(el,null,doc);var D=this.getDocument(el),bd=D?(D.body||D.documentElement):null;if(!el||!bd||el==bd){return[0,0];}return this.getXY(el);}])});var GETDOC=ELD.getDocument,flies=El._flyweights;Ext.fly=El.fly=function(el,named,doc){var ret=null;named=named||'_global';if(el=Ext.getDom(el,null,doc)){(ret=flies[named]=(flies[named]||new El.Flyweight())).dom=el;Ext.isDocument(el)&&(ret._isDoc=true);}return ret;};var flyFn=function(){};flyFn.prototype=El.prototype;El.Flyweight=function(dom){this.dom=dom;};El.Flyweight.prototype=new flyFn();El.Flyweight.prototype.isFlyweight=true;function addListener(el,ename,fn,task,wrap,scope){el=Ext.getDom(el);if(!el){return;}var id=Ext.id(el),es=(resolveCache(el)[id]||{}).events||{},wfn;wfn=E.on(el,ename,wrap);es[ename]=es[ename]||[];es[ename].push([fn,wrap,scope,wfn,task]);if(el.addEventListener&&ename=="mousewheel"){var args=["DOMMouseScroll",wrap,false];el.addEventListener.apply(el,args);Ext.EventManager.addListener(window,'beforeunload',function(){el.removeEventListener.apply(el,args);});}if(ename=="mousedown"&&Ext.isDocument(el)){Ext.EventManager.stoppedMouseDownEvent.addListener(wrap);}};function createTargeted(h,o){return function(){var args=Ext.toArray(arguments);if(o.target==Ext.EventObject.setEvent(args[0]).target){h.apply(this,args);}};};function createBuffered(h,o,task){return function(e){task.delay(o.buffer,h,null,[new Ext.EventObjectImpl(e)]);};};function createSingle(h,el,ename,fn,scope){return function(e){Ext.EventManager.removeListener(el,ename,fn,scope);h(e);};};function createDelayed(h,o,fn){return function(e){var task=new Ext.util.DelayedTask(h);(fn.tasks||(fn.tasks=[])).push(task);task.delay(o.delay||10,h,null,[new Ext.EventObjectImpl(e)]);};};function listen(element,ename,opt,fn,scope){var o=!Ext.isObject(opt)?{}:opt,el=Ext.getDom(element),task;fn=fn||o.fn;scope=scope||o.scope;if(!el){throw"Error listening for \""+ename+'\". Element "'+element+'" doesn\'t exist.';}function h(e){if(!window.Ext){return;}e=Ext.EventObject.setEvent(e);var t;if(o.delegate){if(!(t=e.getTarget(o.delegate,el))){return;}}else{t=e.target;}if(o.stopEvent){e.stopEvent();}if(o.preventDefault){e.preventDefault();}if(o.stopPropagation){e.stopPropagation();}if(o.normalized){e=e.browserEvent;}fn.call(scope||el,e,t,o);};if(o.target){h=createTargeted(h,o);}if(o.delay){h=createDelayed(h,o,fn);}if(o.single){h=createSingle(h,el,ename,fn,scope);}if(o.buffer){task=new Ext.util.DelayedTask(h);h=createBuffered(h,o,task);}addListener(el,ename,fn,task,h,scope);return h;};Ext.apply(Evm,{addListener:Evm.on=function(element,eventName,fn,scope,options){if(Ext.isObject(eventName)){var o=eventName,e,val;for(e in o){val=o[e];if(!propRe.test(e)){if(Ext.isFunction(val)){listen(element,e,o,val,o.scope);}else{listen(element,e,val);}}}}else{listen(element,eventName,options,fn,scope);}},removeListener:Evm.un=function(element,eventName,fn,scope){var el=Ext.getDom(element);el&&Ext.get(el);var elCache=el?resolveCache(el):{},f=el&&((elCache[el.id]||{events:{}}).events)[eventName]||[],wrap,i,l,k,len,fnc;for(i=0,len=f.length;i<len;i++){if(Ext.isArray(fnc=f[i])&&fnc[0]==fn&&(!scope||fnc[2]==scope)){fnc[4]&&fnc[4].cancel();k=fn.tasks&&fn.tasks.length;if(k){while(k--){fn.tasks[k].cancel();}delete fn.tasks;}wrap=fnc[1];E.un(el,eventName,E.extAdapter?fnc[3]:wrap);if(wrap&&eventName=="mousewheel"&&el.addEventListener){el.removeEventListener("DOMMouseScroll",wrap,false);}if(wrap&&eventName=="mousedown"&&Ext.isDocument(el)){Ext.EventManager.stoppedMouseDownEvent.removeListener(wrap);}f.splice(i,1);if(f.length===0){delete elCache[el.id].events[eventName];}for(k in elCache[el.id].events){return false;}elCache[el.id].events={};return false;}}},removeAll:function(el){if(!(el=Ext.getDom(el))){return;}var id=el.id,elCache=resolveCache(el)||{},es=elCache[id]||{},ev=es.events||{},f,i,len,ename,fn,k,wrap;for(ename in ev){if(ev.hasOwnProperty(ename)){f=ev[ename];for(i=0,len=f.length;i<len;i++){fn=f[i];fn[4]&&fn[4].cancel();if(fn[0].tasks&&(k=fn[0].tasks.length)){while(k--){fn[0].tasks[k].cancel();}delete fn.tasks;}wrap=fn[1];E.un(el,ename,E.extAdapter?fn[3]:wrap);if(wrap&&el.addEventListener&&ename=="mousewheel"){el.removeEventListener("DOMMouseScroll",wrap,false);}if(wrap&&Ext.isDocument(el)&&ename=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.removeListener(wrap);}}}}elCache[id]&&(elCache[id].events={});},getListeners:function(el,eventName){el=Ext.getDom(el);if(!el){return;}var id=(Ext.get(el)||{}).id,elCache=resolveCache(el),es=(elCache[id]||{}).events||{};return es[eventName]||null;},purgeElement:function(el,recurse,eventName){el=Ext.getDom(el);var id=el.id,elCache=resolveCache(el),es=(elCache[id]||{}).events||{},i,f,len;if(eventName){if(es.hasOwnProperty(eventName)){f=es[eventName];for(i=0,len=f.length;i<len;i++){Evm.removeListener(el,eventName,f[i][0]);}}}else{Evm.removeAll(el);}if(recurse&&el&&el.childNodes){for(i=0,len=el.childNodes.length;i<len;i++){Evm.purgeElement(el.childNodes[i],recurse,eventName);}}}});E.getListeners=function(el,eventName){return Ext.EventManager.getListeners(el,eventName);};Ext.provide&&Ext.provide('multidom');})();